# Smithery configuration file: https://smithery.ai/docs/config#smitheryyaml

startCommand:
  type: stdio
  configSchema:
    # JSON Schema defining the configuration options for the MCP.
    type: object
    properties:
      envPath:
        type: string
        description: Path to a .env file with SAP_* variables (on-prem or BTP).
      mcpDestination:
        type: string
        description: MCP destination name for service key auth (uses ~/.config/mcp-abap-adt/service-keys/{destination}.json).
    oneOf:
      - required: [envPath]
      - required: [mcpDestination]
  commandFunction:
    # A function that produces the CLI command to start the MCP on stdio.
    |-
    (config) => {
      const args = ['-y', '@mcp-abap-adt/core', '--transport=stdio'];
      if (config.envPath) args.push(`--env=${config.envPath}`);
      if (config.mcpDestination) args.push(`--mcp=${config.mcpDestination}`);
      return {command:'npx', args};
    }
assets:
  - source: node_modules/pino/lib/worker.js
    destination: lib/worker.js
