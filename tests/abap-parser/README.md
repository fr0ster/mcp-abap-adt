# ABAP Parser Tests

–¶–µ–π –∫–∞—Ç–∞–ª–æ–≥ –º—ñ—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ñ —Å–∫—Ä–∏–ø—Ç–∏ –¥–ª—è ABAP –ø–∞—Ä—Å–µ—Ä–∞ —Ç–∞ –π–æ–≥–æ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó –∑ SAP —Å–∏—Å—Ç–µ–º–æ—é.

## üìã –î–æ—Å—Ç—É–ø–Ω—ñ —Ç–µ—Å—Ç–∏

### 1. **test-all-handlers.js** - –ó–∞–≥–∞–ª—å–Ω–∏–π —Ç–µ—Å—Ç –≤—Å—ñ—Ö —Ö–µ–Ω–¥–ª–µ—Ä—ñ–≤
**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –ö–æ–º–ø–ª–µ–∫—Å–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –≤—Å—ñ—Ö —Ç—Ä—å–æ—Ö ABAP —Ö–µ–Ω–¥–ª–µ—Ä—ñ–≤
**–©–æ —Ç–µ—Å—Ç—É—î:**
- `handleGetAbapAST` - –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è AST –¥–µ—Ä–µ–≤–∞
- `handleGetAbapSemanticAnalysis` - —Å–µ–º–∞–Ω—Ç–∏—á–Ω–∏–π –∞–Ω–∞–ª—ñ–∑
- `handleGetAbapSystemSymbols` - —Ä–æ–∑–≤'—è–∑—É–≤–∞–Ω–Ω—è —Å–∏–º–≤–æ–ª—ñ–≤

**–ó–∞–ø—É—Å–∫:**
```bash
cd tests/abap-parser
node test-all-handlers.js
```

**–¢–µ—Å—Ç–æ–≤–∏–π –∫–æ–¥:** –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞ ABAP –ø—Ä–æ–≥—Ä–∞–º–∞ –∑ –∫–ª–∞—Å–∞–º–∏, –º–µ—Ç–æ–¥–∞–º–∏, —Ñ–æ—Ä–º–∞–º–∏, —Ñ—É–Ω–∫—Ü—ñ—è–º–∏

### 2. **test-system-symbols-demo.js** - –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—è —Å–∏—Å—Ç–µ–º–Ω–∏—Ö —Å–∏–º–≤–æ–ª—ñ–≤
**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –î–µ—Ç–∞–ª—å–Ω–∞ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—è JSON —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ GetAbapSystemSymbols
**–©–æ –ø–æ–∫–∞–∑—É—î:**
- –ü–æ–≤–Ω—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É JSON –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
- –†–µ–∂–∏–º–∏ —Ä–æ–±–æ—Ç–∏ (–∑/–±–µ–∑ SAP –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è)
- –î–µ—Ç–∞–ª—å–Ω–µ –ø–æ—è—Å–Ω–µ–Ω–Ω—è –≤—Å—ñ—Ö –ø–æ–ª—ñ–≤
- –ü—Ä–∏–∫–ª–∞–¥–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å

**–ó–∞–ø—É—Å–∫:**
```bash
cd tests/abap-parser
node test-system-symbols-demo.js
```

### 3. **test-salv-table-resolution.js** - –¢–µ—Å—Ç –∑ CL_SALV_TABLE
**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—è —Ä–æ–±–æ—Ç–∏ –∑ —Ä–µ–∞–ª—å–Ω–∏–º SAP –∫–ª–∞—Å–æ–º CL_SALV_TABLE
**–©–æ —Ç–µ—Å—Ç—É—î:**
- –†–æ–∑–≤'—è–∑—É–≤–∞–Ω–Ω—è CL_SALV_TABLE –∑ SAP —Å–∏—Å—Ç–µ–º–∏
- –û—Ç—Ä–∏–º–∞–Ω–Ω—è –º–µ—Ç–æ–¥—ñ–≤ —Ç–∞ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ñ–≤
- –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –ø–∞–∫–µ—Ç —Ç–∞ –æ–ø–∏—Å
- –ü–æ–≤'—è–∑–∞–Ω—ñ SALV –∫–ª–∞—Å–∏

**–ó–∞–ø—É—Å–∫:**
```bash
cd tests/abap-parser
node test-salv-table-resolution.js
```

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –î–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ CL_SALV_TABLE –∑ SAP —Å–∏—Å—Ç–µ–º–∏

## üöÄ –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### 1. –ó–±—ñ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç—É
```bash
# –ó –∫–æ—Ä–µ–Ω—è –ø—Ä–æ–µ–∫—Ç—É
make build
```

### 2. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è ANTLR4 (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)
```bash
make setup
make generate
```

### 3. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
```bash
npm install
```

## üìä –û—á—ñ–∫—É–≤–∞–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏

### test-all-handlers.js
```
‚úÖ AST Generated successfully
   - Source length: 1234
   - Line count: 56
   - Classes found: 1
   - Methods found: 4
   - Forms found: 1

‚úÖ Semantic Analysis completed successfully
   - Symbols found: 15
   - Dependencies: 1
   - Scopes: 8
   - Complexity metrics available

‚úÖ System Symbol Resolution completed successfully
   - Total symbols: 15
   - Resolution rate: 0.0% (–±–µ–∑ SAP –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è)
```

### test-system-symbols-demo.js
```json
{
  "symbols": [
    {
      "name": "LCL_DEMO_CLASS",
      "type": "class",
      "systemInfo": {
        "exists": false,
        "objectType": "LOCAL"
      }
    }
  ],
  "systemResolutionStats": {
    "totalSymbols": 8,
    "resolutionRate": "0.0%"
  }
}
```

### test-salv-table-resolution.js
```
üéØ –ó–Ω–∞–π–¥–µ–Ω—ñ SALV –∫–ª–∞—Å–∏ —Ç–∞ —ó—Ö —Å–∏—Å—Ç–µ–º–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è:
1. CL_SALV_TABLE (class)
   ‚úÖ –Ü—Å–Ω—É—î –≤ SAP: –¢–ê–ö
   - –¢–∏–ø –æ–±'—î–∫—Ç–∞: CLAS
   - –û–ø–∏—Å: Simple ALV Table
   - –ü–∞–∫–µ—Ç: SALV
   - –ú–µ—Ç–æ–¥–∏: FACTORY, DISPLAY, GET_DISPLAY_SETTINGS...
```

## üõ†Ô∏è –ù–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è

### –Ø–∫—â–æ —Ç–µ—Å—Ç–∏ –Ω–µ –ø—Ä–∞—Ü—é—é—Ç—å:

1. **–ü–æ–º–∏–ª–∫–∞ –º–æ–¥—É–ª—ñ–≤:**
   ```bash
   # –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —á–∏ —ñ—Å–Ω—É—é—Ç—å —Å–∫–æ–º–ø—ñ–ª—å–æ–≤–∞–Ω—ñ —Ñ–∞–π–ª–∏
   ls -la ../../dist/handlers/
   
   # –Ø–∫—â–æ –Ω–µ–º–∞—î - –∑–±–µ—Ä—ñ—Ç—å –ø—Ä–æ–µ–∫—Ç
   cd ../..
   make build
   ```

2. **–ü–æ–º–∏–ª–∫–∏ SAP –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è:**
   - –¶–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ —è–∫—â–æ –Ω–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∞ –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è
   - –¢–µ—Å—Ç–∏ –ø—Ä–∞—Ü—é—é—Ç—å —ñ –±–µ–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ SAP –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è
   - –î–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –Ω–∞–ª–∞—à—Ç—É–π—Ç–µ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

3. **–ü–æ–º–∏–ª–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥—É:**
   ```bash
   # –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä—É–π—Ç–µ –ø–∞—Ä—Å–µ—Ä
   cd ../..
   make clean
   make generate
   make build
   ```

## üìù –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö

### –ë–∞–∑–æ–≤–∏–π ABAP –∫–æ–¥ (test-all-handlers.js):
- REPORT –ø—Ä–æ–≥—Ä–∞–º–∞
- –ö–ª–∞—Å –∑ –ø—É–±–ª—ñ—á–Ω–∏–º–∏ —Ç–∞ –ø—Ä–∏–≤–∞—Ç–Ω–∏–º–∏ —Å–µ–∫—Ü—ñ—è–º–∏
- –ú–µ—Ç–æ–¥–∏ –∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
- DATA –¥–µ–∫–ª–∞—Ä–∞—Ü—ñ—ó
- FORM —Ç–∞ FUNCTION
- INCLUDE –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å

### –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ–π–Ω–∏–π –∫–æ–¥ (test-system-symbols-demo.js):
- –ü—Ä–æ—Å—Ç—ñ—à–∏–π –∫–æ–¥ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó —Å—Ç—Ä—É–∫—Ç—É—Ä–∏
- –í—Å—ñ –æ—Å–Ω–æ–≤–Ω—ñ ABAP –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó
- –û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∏–π –¥–ª—è —á–∏—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—ñ

### SALV –ø—Ä–∏–∫–ª–∞–¥ (test-salv-table-resolution.js):
- –†–µ–∞–ª—å–Ω–∏–π –∫–æ–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è CL_SALV_TABLE
- REF TO –¥–µ–∫–ª–∞—Ä–∞—Ü—ñ—ó
- –°—Ç–∞—Ç–∏—á–Ω—ñ —Ç–∞ –º–µ—Ç–æ–¥–∏ –µ–∫–∑–µ–º–ø–ª—è—Ä—É
- TRY-CATCH –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫

## üéØ –†–æ–∑—à–∏—Ä–µ–Ω–Ω—è —Ç–µ—Å—Ç—ñ–≤

–î–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö —Ç–µ—Å—Ç—ñ–≤:

1. –°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–∏–π `.js` —Ñ–∞–π–ª –≤ —Ü—å–æ–º—É –∫–∞—Ç–∞–ª–æ–∑—ñ
2. –í–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ —à–ª—è—Ö `../../dist/handlers/` –¥–ª—è —ñ–º–ø–æ—Ä—Ç—ñ–≤
3. –î–æ–¥–∞–π—Ç–µ –æ–ø–∏—Å —É —Ü–µ–π README
4. –¢–µ—Å—Ç—É–π—Ç–µ –∑ —Ä—ñ–∑–Ω–∏–º–∏ ABAP –∫–æ–¥–∞–º–∏

## üí° –ö–æ—Ä–∏—Å–Ω—ñ –∫–æ–º–∞–Ω–¥–∏

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å—ñ—Ö —Ç–µ—Å—Ç—ñ–≤ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ
for test in test-*.js; do echo "=== $test ==="; node "$test"; echo; done

# –¢–µ—Å—Ç –∑ –¥–µ—Ç–∞–ª—å–Ω–∏–º –ª–æ–≥–æ–º
DEBUG=1 node test-all-handlers.js

# –¢–µ—Å—Ç —Ç—ñ–ª—å–∫–∏ –ª–æ–∫–∞–ª—å–Ω–∏—Ö —Å–∏–º–≤–æ–ª—ñ–≤
node -e "
const test = require('./test-system-symbols-demo.js');
// –ú–æ–∂–Ω–∞ –∑–º—ñ–Ω–∏—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
"

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
node test-system-symbols-demo.js | grep -A 20 "JSON –≤—ñ–¥–ø–æ–≤—ñ–¥—å"
